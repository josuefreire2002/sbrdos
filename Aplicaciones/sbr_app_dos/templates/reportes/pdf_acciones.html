{% extends 'base.html' %}
{% load static %}

{% block title %}{{ titulo }} | SBR Gestión{% endblock %}
{% block breadcrumb %}{{ titulo }}{% endblock %}

{% block extra_head %}
<style>
    .action-card {
        max-width: 400px;
        margin: 2rem auto;
    }

    .action-btn {
        width: 100%;
        padding: 1rem;
        font-size: 1.1rem;
        margin-bottom: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
    }

    .action-btn i {
        font-size: 1.3rem;
    }

    .doc-info {
        text-align: center;
        padding: 1.5rem;
        background: #f8f9fa;
        border-radius: 12px;
        margin-bottom: 1.5rem;
    }

    .doc-icon {
        font-size: 4rem;
        color: #dc3545;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-md-8 col-lg-6">
        <div class="card border-0 shadow-sm action-card">
            <div class="card-body p-4">

                <div class="doc-info">
                    <i class="bi bi-file-earmark-pdf doc-icon"></i>
                    <h5 class="fw-bold mb-1">{{ titulo }}</h5>
                    <p class="text-muted mb-0">{{ subtitulo }}</p>
                </div>

                <!-- Botón Descargar -->
                <a href="{{ pdf_url }}" class="btn btn-primary action-btn" download>
                    <i class="bi bi-download"></i> Descargar PDF
                </a>

                <!-- Botón Compartir (solo si Web Share API está disponible) -->
                <button type="button" class="btn btn-success action-btn" id="btn-compartir" style="display: none;">
                    <i class="bi bi-share"></i> Compartir
                </button>

                <!-- Botón Volver -->
                <a href="{{ url_volver }}" class="btn btn-outline-secondary action-btn">
                    <i class="bi bi-arrow-left"></i> Volver
                </a>

            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const btnCompartir = document.getElementById('btn-compartir');

        // Mostrar botón compartir solo si Web Share API está disponible (móviles)
        if (navigator.share) {
            btnCompartir.style.display = 'flex';

            btnCompartir.addEventListener('click', async function () {
                try {
                    await navigator.share({
                        title: '{{ titulo }}',
                        text: '{{ subtitulo }}',
                        url: '{{ pdf_url }}'
                    });
                } catch (err) {
                    console.log('Error al compartir:', err);
                }
            });
        }
    });
</script>
{% endblock %}